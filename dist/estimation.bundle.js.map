{"version":3,"file":"estimation.bundle.js","mappings":";;;;;;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA,8BAA8B,qBAAqB;AACnD,8BAA8B,qBAAqB;AACnD,2BAA2B,oBAAoB,IAAI,mBAAmB;AACtE;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;AACA,uCAAuC,UAAU;AACjD,SAAS;AACT,KAAK;;AAEL;AACA;AACA,wDAAwD,gBAAgB;AACxE;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,kCAAkC,kBAAkB;AACpD,KAAK;AACL;AACA;;AAEA;;;;;;;ACzBA;AACA;;AAEA;AACA,mEAAmE,0BAA0B;;AAE7F;AACA;;AAEA;AACA,mDAAmD,gBAAgB;AACnE;;AAEA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA,CAAC;;;;;;;ACxCD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2FAA2F,UAAU,KAAK,WAAW;AACrH,0GAA0G,UAAU,KAAK,WAAW;AACpI,2FAA2F,UAAU,KAAK,WAAW;AACrH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;AC9GA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AClDD;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,mBAAmB;AACnB;;;;;;UC1BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;;;ACtBA;AACA;;AAEO;AACP;AACA;AACA,2DAA2D,eAAe;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA,0DAA0D,cAAc;AACxE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iCAAiC,gCAAgC;;AAEjE;AACA,qCAAqC,iCAAiC;AACtE;AACA;;;AAGA;AACA;AACA,CAAC;;AAED;;AC/CA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAEM;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,uCAAuC,IAAI;AAC3C;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HqD;;AAE9C;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ,kBAAkB;AAC1B;AACA;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA,YAAY,kBAAkB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7DA;AAC6D;AACP;;AAEtD;;AAEA;AACA;AACA;AACA;;AAEA,yFAAyF,UAAU,uBAAuB;AAC1H;AACA,mKAAmK,UAAU;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sKAAsK,aAAa;AACnL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sKAAsK,UAAU;AAChL,4CAA4C,0DAA0D,sGAAsG,UAAU;AACtN;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA,oGAAoG,0BAA0B;AAC9H;AACA;AACA,yCAAyC,qBAAqB;AAC9D,KAAK;;AAEL,IAAI,iBAAiB;AACrB;;;;;;;;;;;AClEiC;AACG;AACM;AACN;AACG;AACF;AACD;AACH;AACD","sources":["webpack://comfort-masters/./assets/js/modules/budget-range.js","webpack://comfort-masters/./assets/js/modules/calendly.js","webpack://comfort-masters/./assets/js/modules/nominatim.js","webpack://comfort-masters/./assets/js/modules/post-data.js","webpack://comfort-masters/./assets/js/modules/spaces.js","webpack://comfort-masters/./assets/js/modules/validate-data.js","webpack://comfort-masters/webpack/bootstrap","webpack://comfort-masters/./assets/js/modules/form-navigation.js","webpack://comfort-masters/./assets/js/modules/handle-input.js","webpack://comfort-masters/./assets/js/modules/upload-files.js","webpack://comfort-masters/./assets/js/modules/toggle-description.js","webpack://comfort-masters/./assets/js/estimation/script.js"],"sourcesContent":["const calcBudgetBtn = document.querySelector('.js-calc-budget');\n\ncalcBudgetBtn.addEventListener('click', handleCalcBudget);\n\nfunction handleCalcBudget() {\n    const selectedSpaces = document.querySelectorAll('.js-spaces-list li');\n    const range = document.querySelector('.js-budget-value');\n    const minVal = document.querySelector('.js-calc-min-value');\n    const maxVal = document.querySelector('.js-calc-max-value');\n\n    calculateBudgetRange(selectedSpaces, range, minVal, maxVal);\n}\n\nconst spacesBudget = [\n    {\n        space: 'Room Reconstruction',\n        services: ['Attic', 'Basement', 'Bedroom', 'Foyer', 'Laundry', 'Living Space', 'Garage', 'Kitchen'],\n        budget: { minValue: 5000, maxValue: 10000 }\n    },\n    {\n        space: 'Bathroom Reconstruction',\n        services: ['Bathroom'],\n        budget: { minValue: 7000, maxValue: 15000 }\n    },\n    {\n        space: 'Room Additions',\n        services: ['Room Additions'],\n        budget: { minValue: 8000, maxValue: 20000 }\n    },\n    {\n        space: 'Roof Reconstructions',\n        services: ['Roofing'],\n        budget: { minValue: 500, maxValue: 30000 }\n    },\n    {\n        space: 'Stucco',\n        services: ['Stucco', 'Yard', 'House Exterior'],\n        budget: { minValue: 1000, maxValue: 3000 }\n    },\n    {\n        space: 'Painting',\n        services: ['Painting'],\n        budget: { minValue: 2000, maxValue: 5000 }\n    },\n    {\n        space: 'Whole House',\n        services: ['Whole Home'],\n        budget: { minValue: 20000, maxValue: 50000 }\n    },\n    {\n        space: 'Something Else',\n        services: ['Something Else'],\n        budget: { minValue: 200, maxValue: 1000 }\n    },\n];\n\nfunction calculateBudgetRange(selectedSpaces, range, minVal, maxVal) {\n    const selectedSpacesLowerCase = Array.from(selectedSpaces).map(space => space.dataset.space.toLowerCase());\n\n    const hasWholeHouseService = selectedSpacesLowerCase.some(space =>\n        spacesBudget.find(entry => entry.space === 'Whole House').services\n          .some(wholeHouseService => wholeHouseService.toLowerCase() === space)\n      );    \n\n    const calculateTotal = (key) => {\n        if (hasWholeHouseService) {\n            const wholeHouseBudget = spacesBudget.find(entry => entry.space === 'Whole House').budget[key];\n            return wholeHouseBudget;\n        }\n\n        return selectedSpacesLowerCase.reduce((acc, currentVal) => {\n            const spaceBudget = spacesBudget.find(entry => entry.services.some(service => service.toLowerCase() === currentVal));\n            return acc + (spaceBudget ? spaceBudget.budget[key] : 0);\n        }, 0);\n    };\n\n    const min = calculateTotal('minValue');\n    const max = calculateTotal('maxValue');\n\n    minVal.textContent = `$ ${min.toLocaleString()}`;\n    maxVal.textContent = `$ ${max.toLocaleString()}`;\n    range.textContent = `${minVal.textContent} - ${maxVal.textContent}`;\n}\n","const authToken = 'eyJraWQiOiIxY2UxZTEzNjE3ZGNmNzY2YjNjZWJjY2Y4ZGM1YmFmYThhNjVlNjg0MDIzZjdjMzJiZTgzNDliMjM4MDEzNWI0IiwidHlwIjoiUEFUIiwiYWxnIjoiRVMyNTYifQ.eyJpc3MiOiJodHRwczovL2F1dGguY2FsZW5kbHkuY29tIiwiaWF0IjoxNzA1OTg3ODIxLCJqdGkiOiI2NGEyYzEzZS0xN2IwLTQ5YTUtYWY4NC1iZWIyY2IxNGM4YjUiLCJ1c2VyX3V1aWQiOiJiZDI2ODYyZC00ZmZlLTRhODQtYjZmOS1kNGJhOTJkMWFkMWIifQ.t3FmEIUwd8PMqCrn-K4oAHJfisanCVwgSo1FYlT4a7dBXwfCacZNb191smbYt2mHniKKqNz4gNZ63td84L9Xxg';\n\nfunction openCalendlyPopup() {\n    fetch('https://api.calendly.com/users/me', {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${authToken}`,\n        },\n    })\n\n    .then(response => {\n        if(!response.ok) {\n            throw new Error(`Network response failed: ${response.status}`);\n        }\n\n        return response.json();\n    })\n    .then(data => {\n        const scheduleLink = data.resource.scheduling_url;\n\n        Calendly.initPopupWidget({url: scheduleLink});\n    })\n    .catch(error => console.log('Error:', error));\n}\n\ndocument.querySelectorAll('.js-calendly-popup').forEach(popup => popup.addEventListener('click', openCalendlyPopup));","const autocompleteInput = document.querySelector('.js-address-input');\nconst autocompleteList = document.querySelector('.js-address-list');\n\nasync function getAutocompleteOptions(query) {\n    const apiUrl = `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(query)}&format=json&limit=5&countrycodes=us&accept-language=en`;\n\n    try {\n        const response = await fetch(apiUrl);\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        const suggestions = data.map(result => result.display_name);\n\n        displayAutocompleteOptions(suggestions);\n    } catch (error) {\n        console.error('Error fetching autocomplete options:', error);\n    }\n}\n\nfunction displayAutocompleteOptions(options) {\n\n    autocompleteList.textContent = '';\n\n    options.forEach(option => {\n        const listItem = document.createElement('li');\n        listItem.textContent = option;\n        autocompleteList.appendChild(listItem);\n\n        listItem.addEventListener('click', () => {\n            autocompleteInput.value = option;\n            autocompleteList.textContent = '';\n        });\n    });\n}\n\nautocompleteInput.addEventListener('input', () => {\n    getAutocompleteOptions(autocompleteInput.value);\n});","function initGoogleSignIn() {\n    g_id_signin = g_id_signin || [];\n    g_id_signin.push({\n        'callback': handleGoogleSignIn,\n        'client_id': '343870790834-cgpog94euautb7vt8q8e941pl0hodn7u.apps.googleusercontent.com',\n        'auto_prompt': false\n    });\n}\n\nfunction initDriveApi() {\n    gapi.load('auth2', function () {\n        gapi.auth2.init({\n            client_id: '343870790834-cgpog94euautb7vt8q8e941pl0hodn7u.apps.googleusercontent.com',\n            scope: 'https://www.googleapis.com/auth/drive.file',\n        });\n    });\n}\n     \nconst estimationForm = document.querySelector('.js-estimation-form');\n\nestimationForm.addEventListener('submit', handleFormSubmit);\n\nasync function handleFormSubmit(event) {\n    event.preventDefault();\n    // initGoogleSignIn();\n    // initDriveApi();\n    const selectedSpaces = getSelectedSpaces();\n    const formData = new FormData(estimationForm);\n    formData.append('selectedSpaces', JSON.stringify(selectedSpaces));\n    getSelectedSpacesDescription(formData);\n\n    postData(formData);\n\n    // uploadFilesToDrive(files)\n    //     .then(fileUrls => {\n    //         console.log('File URLs:', fileUrls);\n    //         const filesArray = fileUrls.map(file => file.webContentLink);\n    //         formData.append('uploadedFiles', JSON.stringify(filesArray));\n    //         postData(formData);\n    //     })\n    //     .catch(error => {\n    //         console.error('Error uploading files to Google Drive:', error);\n    //     });\n}\n\nfunction getSelectedSpaces() {\n    const listItems = document.querySelectorAll('.js-spaces-list li');\n    const selectedSpaces = Array.from(listItems).map(item => item.getAttribute('data-space')).join(',');\n    return selectedSpaces;\n}\n\nfunction getSelectedSpacesDescription(formData) {\n    const spaceNameInputs = document.querySelectorAll('.js-space-name-input');\n    const spaceDescription = document.querySelectorAll('.js-space-desc-textarea');\n    const fileInputs = document.querySelectorAll('.js-upload-files-inputt');\n\n    formData.append('spaceName', Array.from(spaceNameInputs).map((item, index) => `Name (${index + 1}): ${item.value}`));\n    formData.append('spaceDescription', Array.from(spaceDescription).map((item, index) => `Description (${index + 1}): ${item.value}`));\n    formData.append('uploadedFiles', Array.from(fileInputs).map((item, index) => `Files (${index + 1}): ${item.files}`));\n}\n\nasync function uploadFilesToDrive(files) {\n    const fileUrls = [];\n\n    try {\n        for (const file of files) {\n            const metadata = {\n                name: file.name,\n            };\n\n            const form = new FormData();\n            form.append('file', file);\n\n            const driveResponse = await gapi.client.drive.files.create({\n                resource: metadata,\n                media: {\n                    mimeType: file.type,\n                    body: form,\n                },\n            });\n\n            const fileData = driveResponse.result;\n            fileUrls.push(fileData);\n            console.log('File URLs:', fileUrls);\n        }\n    } catch (error) {\n        console.error('Error uploading files to Google Drive:', error);\n        throw error;\n    }\n\n    return fileUrls;\n}\n\nasync function postData(formData) {\n    try {\n        const response = await fetch('https://api.apispreadsheets.com/data/cruEXgMCQGq0lppK/', {\n            method: 'POST',\n            body: formData,\n        });\n\n        if (!response.ok) {\n            console.error('Failed to submit data. Status:', response.status);\n        }\n    } catch (error) {\n        console.error('Error:', error);\n    }\n}\n\nfunction handleGoogleSignIn(googleUser) {\nconsole.log('Google Sign-In Information:', googleUser);\n}\n","const spacesContainer = document.querySelector('.js-spaces-container');\nconst spacesList = spacesContainer.querySelector('ul');\nconst spacesOptions = document.querySelector('.js-spaces-options-container');\n\nfunction createListItem(value) {\n    const listItem = document.createElement('li');\n    listItem.textContent = value;\n    listItem.dataset.space = value;\n\n    const removeButton = document.createElement('button');\n    removeButton.type = 'button';\n    removeButton.ariaLabel = 'Remove item button';\n    removeButton.classList.add('clear-text-btn', 'is-active', 'js-clear-input-btn');\n\n    listItem.append(removeButton);\n    spacesList.append(listItem);\n\n    removeButton.addEventListener('click', () => {\n        const matchingButton = Array.from(spacesOptions.querySelectorAll('.spaces__item')).find(option => option.textContent == listItem.dataset.space);\n\n        if(matchingButton) {\n            matchingButton.classList.remove('is-disabled');\n            matchingButton.removeAttribute('disabled');\n        }\n\n        listItem.remove();\n\n        if (spacesList.querySelectorAll('li').length === 0) {\n            spacesContainer.classList.remove('is-active');\n            spacesContainer.dataset.isValid = 'false';\n        }\n    });\n}\n\nfunction handleSpacesItemClick(button) {\n    createListItem(button.textContent);\n    button.classList.add('is-disabled');\n    button.setAttribute('disabled', 'true');\n    spacesContainer.dataset.isValid = 'true';\n\n    if (!spacesContainer.classList.contains('is-active')) {\n        spacesContainer.classList.add('is-active');\n    }\n}\n\nspacesOptions.addEventListener('click', (event) => {\n    const clickedButton = event.target;\n    if (clickedButton.classList.contains('spaces__item')) {\n        handleSpacesItemClick(clickedButton);\n    }\n});\n","const surveyContainer = document.querySelector('.js-survey-container');\n\n  surveyContainer.addEventListener('input', (e) => {\n    if (e.target.classList.contains('js-survey-option')) {\n        e.target.dataset.isValid = e.target.checked;\n    };\n  });\n\n  const targetNode = document.documentElement;\n\n  const observer = new MutationObserver(function(mutationsList) {\n      for (const mutation of mutationsList) {\n          if (mutation.type === 'attributes') {\n              if (mutation.attributeName === 'data-is-valid') {\n                  const closestValidateData = mutation.target.closest('.js-validate-data');\n                  const closestNextBtn = closestValidateData.querySelector('.js-next-step-btn');\n\n                  if (closestNextBtn) {\n                      closestNextBtn.disabled = mutation.target.dataset.isValid !== 'true';\n                  }\n              }\n          }\n      }\n  });\n\n  const config = { attributes: true, subtree: true };\n  observer.observe(targetNode, config);","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const stepBtns = document.querySelectorAll('.js-step-btn');\nconst getEstimBtn = document.querySelector('.js-get-estim-btn');\n\nexport const handleStepButtonClick = (event) => {\n    const currentBtn = event.currentTarget;\n    const currentStepNum = parseInt(currentBtn.getAttribute('data-step'));\n    const currentStep = document.querySelector(`.js-step-${currentStepNum}`);\n\n    if (event.target.classList.contains('js-skip-btn')) {\n        currentStep.style.display = 'none';\n        document.querySelector('.js-last-step').style.display = 'block';\n        return;\n    } \n    \n    let targetStepNum;\n\n    if (currentBtn.classList.contains('js-next-step-btn')) {\n        targetStepNum = currentStepNum + 1;\n    } else if (currentBtn.classList.contains('js-prev-step-btn')) {\n        targetStepNum = currentStepNum - 1;\n    }\n\n    const targetStep = document.querySelector(`.js-step-${targetStepNum}`);\n    const progressBar = targetStep.querySelector('.js-progress-bar');\n    const initialWidthMob = 45;\n    const initialWidthDesk = 163;\n\n    if (currentStep) {\n        currentStep.style.display = 'none';\n    }\n\n    if (targetStep) {\n        targetStep.style.display = 'block';\n    }\n\n    progressBar.style.width = `${initialWidthMob * targetStepNum}px`;\n\n    if (window.innerWidth >= 768) {\n        progressBar.style.width = `${initialWidthDesk * targetStepNum}px`;\n    }\n}\n\n\nstepBtns.forEach(button => {\n    button.addEventListener('click', handleStepButtonClick);\n});\n\ngetEstimBtn.addEventListener('click', handleStepButtonClick);","const containers = document.querySelectorAll('.js-input-container');\nconst addressList = document.querySelector('.js-address-list');\n\ncontainers.forEach(container => {\n    container.addEventListener('input', handleInput);\n    container.querySelector('.js-text-input').addEventListener('blur', handleBlur);\n    container.querySelectorAll('.js-clear-input-btn').forEach(btn => btn.addEventListener('click', handleClearButtonClick));\n});\n\nexport const toggleErrorMessage = (input, isAdd) => {\n    const errorMessageElement = input.parentElement.nextElementSibling;\n    errorMessageElement.classList.toggle('visually-hidden', !isAdd);\n    input.classList.toggle('error-alert', isAdd);\n}\n\nfunction handleInput(e) {\n    const input = e.target;\n    const closestClearBtn = input.parentElement.querySelector('.js-clear-input-btn');\n\n    closestClearBtn?.classList.toggle('is-active', Boolean(input.value));\n    toggleErrorMessage(input, false);\n    validateInput(input);\n    input.classList.contains('js-address-input') ? '' : handleValidation(input);\n    input.classList.contains('js-budget-input') ? input.parentElement.classList.add('is-focused') : '';\n}\n\nfunction handleBlur(e) { \n    const input = e.target;\n\n    if (!input.value) {\n        toggleErrorMessage(input, true);\n        addressList.innerHTML = '';\n    }\n\n    input.classList.contains('js-address-input') ? handleValidation(input) : '';\n}\n\nfunction handleClearButtonClick(e) {\n    const clearBtn = e.target;\n    const closestTextInput = clearBtn.parentElement.querySelector('.js-text-input');\n\n    if (closestTextInput) {\n        closestTextInput.value = '';\n        closestTextInput.dataset.isInputValid = false;\n        \n        handleValidation(closestTextInput);\n        toggleErrorMessage(closestTextInput, true);\n        clearBtn.classList.remove('is-active');\n        addressList.innerHTML = '';\n    }\n}\n\nfunction validateInput(input) {\n    const inputValue = input.value.trim();\n    const inputType = input.classList.contains('js-name-input') ? 'name' : input.classList.contains('js-email-input') ? 'email' : input.classList.contains('js-budget-input') ? 'budget' : 'other';\n\n    switch (inputType) {\n        case 'name':\n            const isNameValid = inputValue.length >= 3 && inputValue.length <= 40;\n            input.dataset.isInputValid = isNameValid;\n            !isNameValid ? toggleErrorMessage(input, true) : '';\n\n            return isNameValid;\n\n        case 'email':\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            const isEmailValid = emailRegex.test(inputValue) && checkEmailService(inputValue);\n            input.dataset.isInputValid = isEmailValid;\n            !isEmailValid ? toggleErrorMessage(input, true) : '';\n\n            return isEmailValid;\n\n        case 'budget':\n            const budgetPattern = /^\\d{3,7}$/;\n            const isBudgetValid = budgetPattern.test(inputValue);\n            input.dataset.isInputValid = isBudgetValid;\n            !isBudgetValid ? toggleErrorMessage(input, true) : '';\n\n            return isBudgetValid;\n\n        default:\n            input.dataset.isInputValid = inputValue !== '';\n            return inputValue !== '';\n    }\n}\n\nfunction handleValidation(input) {\n    const container = input.closest('.js-input-container');\n\n    const allInputsValid = Array.from(container.querySelectorAll('.js-text-input')).every(textInput => {\n        return textInput.dataset.isInputValid === 'true';\n        });\n\n    container.dataset.isValid = allInputsValid;\n}\n\nfunction checkEmailService(email) {\n    const validEmailServices = [\n        'gmail.com',\n        'yahoo.com',\n        'hotmail.com',\n        'outlook.com',\n        'aol.com',\n        'icloud.com',\n        'mail.com',\n        'zoho.com',\n        'protonmail.com',\n        'yandex.com',\n        'live.com',\n        'gmx.com',\n        'inbox.com',\n        'me.com',\n        'rocketmail.com',\n        'fastmail.com',\n        'disroot.org',\n        'tutanota.com',\n        'riseup.net',\n        'mail.ru',\n        'naver.com',\n        'daum.net',\n        'rediff.com',\n      ];    \n    const domain = email.split('@')[1];\n    return validEmailServices.includes(domain);\n}","import {toggleErrorMessage} from './handle-input.js';\n\nexport const handleFilesUpload = () =>{\n    const container = document.querySelector('.js-estimation-form');\n    const maxFileSize = 1024 * 1024 * 5;\n    const allowedTypes = ['application/pdf', 'image/jpeg', 'image/png', 'image/heic'];\n\n    container.addEventListener('change', handleEvent);\n    container.addEventListener('dragover', handleEvent);\n    container.addEventListener('drop', handleEvent);\n\n    function handleEvent(e) {\n        e.preventDefault();\n\n        switch (e.type) {\n            case 'change':\n                if (e.target.classList.contains('js-upload-files-input')) {\n                    uploadFiles(e.target, maxFileSize, allowedTypes);\n                }\n                break;\n\n            case 'drop':\n                if (e.target.classList.contains('js-upload-files-label')) {\n                    e.target.files = e.dataTransfer.files;\n                    uploadFiles(e.target, maxFileSize, allowedTypes);\n                }\n                break;\n        }\n    }\n\n    function uploadFiles(input, maxFileSize, allowedTypes) {\n        const inputContainer = input.closest('.js-renovation-form');\n        const uploadedFiles = inputContainer.querySelector('.js-upload-files-list');\n        toggleErrorMessage(input, false);\n    \n        const validFiles = Array.from(input.files).filter(file => isValidFile(file, input, maxFileSize, allowedTypes));\n    \n        const uploadFilesItems = validFiles.map(file => `\n            <li>${file.name}<button class=\"clear-text-btn is-active js-remove-file-btn\"></button></li>\n        `);\n    \n        uploadedFiles.insertAdjacentHTML('beforeend', uploadFilesItems.join(''));\n    \n        const removeBtns = inputContainer.querySelectorAll('.js-remove-file-btn');\n        removeBtns.forEach(button => {\n            button.addEventListener('click', () => {\n                button.parentElement.remove();\n            });\n        });\n    }\n\n    function isValidFile(file, input, maxFileSize, allowedTypes) {\n        if (!allowedTypes.includes(file.type) || file.size > maxFileSize) {\n            toggleErrorMessage(input, true);\n            input.value = '';\n            return false;\n        }\n    \n        return true;\n    }\n    \n}\n","const createRenovationButton = document.querySelector('.js-create-block-btn');\nimport { handleStepButtonClick } from './form-navigation.js';\nimport { handleFilesUpload } from './upload-files.js';\n\ncreateRenovationButton.addEventListener('click', createRenovationBlock);\n\nfunction createRenovationBlock() {\n    const selectedSpaces = document.querySelectorAll('.js-spaces-list li');\n    const container = document.querySelector('.js-estimation-form');\n    const lastStep = document.querySelector('.js-last-step');\n\n    const template = (index, spaceContent) => `<div class=\"estimation__wrapper js-step-${7 + index}\" style=\"display: none;\">\n                    <div class=\"estimation__heading\">\n                            <button type=\"button\" class=\"previous-page-button js-prev-step-btn js-step-btn\" aria-label=\"Go back to the previous step\" data-step=\"${7 + index}\"></button>\n                            <a class=\"estimation__close-btn\" href=\"/\">Exit</a>\n                    </div>\n                    <div class=\"estimation__inner\">\n                        <div class=\"progress-bar js-progress-bar\"></div>\n                        <div class=\"estimation__content\">\n                            <div class=\"estimation__col\">\n                                <h2 class=\"estimation__title\">Tell us more about basement</h2>\n                                <p class=\"estimation__subtitle\">Details about each space help us match you to the right contractors.</p>\n                            </div>\n                            <div class=\"estimation__col js-renovation-form-container\">\n                            <div class=\"renovation js-renovation-form\">\n                                <div class=\"input-container\">\n                                    <input class=\"input input_bordered js-text-input js-space-name-input\" type=\"text id=\"name\" aria-label=\"Space name\" placeholder=\"${spaceContent}\" maxlength=\"50\">\n                                    <button type=\"button\" class=\"clear-text-btn js-clear-input-btn\"></button>\n                                </div>\n                                <p>Describe this space and what you want to do with it</p>\n                                <div class=\"textarea-container\">\n                                    <textarea class=\"input input_bordered textarea js-text-input js-space-desc-textarea\" id=\"description\" placeholder=\"Where is it? What's it like now? What's your idea outcome?\" aria-label=\"Describe your space\" maxlength=\"200\"></textarea>\n                                    <button type=\"button\" class=\"clear-text-btn js-clear-input-btn\"></button>\n                                </div>\n                                    <p>Upload photos</p>\n                                <div class=\"drag-n-drop\" tabindex=\"0\">\n                                    <label for=\"photo-upload-input\" class=\"js-upload-files-label\">Drag and drop photo or <u>choose files</u></label>\n                                    <input accept=\"application/pdf,image/jpeg,image/png,image/heic\" class=\"js-upload-files-input\" hidden id=\"photo-upload-input\" multiple type=\"file\">\n                                </div>\n                                <p class=\"error-message visually-hidden\">We accept: .pdf, .jpeg, .png, .heic</p>\n                                <ul class=\"upload-files-list js-upload-files-list\"></ul>\n                            </div>\n                        </div>\n                    </div>\n                    </div>\n                    <div class=\"estimation__footer\"> \n                        <div class=\"estimation__next-btn-wrap\">\n                            <button type=\"submit\" class=\"estimation__next-btn button button_secondary-lightest js-skip-btn js-next-step-btn js-step-btn\" data-step=\"${7 + index}\">Skip</button>\n                            <button type=\"${index === selectedSpaces.length - 1 ? 'submit' : 'button'}\" class=\"estimation__next-btn button js-toggle-description js-next-step-btn js-step-btn\" data-step=\"${7 + index}\">Next</button>\n                        </div>\n                    </div>\n                 </div> `;\n\n    Array.from(selectedSpaces).forEach((space, index) => {\n        container.insertAdjacentHTML('beforeend', template(index, space.textContent));\n    });\n\n    const stepBtns = document.querySelectorAll('.js-step-btn');\n\n    lastStep.setAttribute('class', `estimation__wrapper estimation_last-step js-last-step js-step-${7 + selectedSpaces.length}`);\n    lastStep.querySelector('.js-last-step-prev-btn').setAttribute('data-step', 7 + selectedSpaces.length);\n    stepBtns.forEach(button => {\n        button.addEventListener('click', handleStepButtonClick);\n    });\n\n    handleFilesUpload();\n}\n","import '../modules/post-data.js';\nimport '../modules/budget-range.js';\nimport '../modules/toggle-description.js';\nimport '../modules/upload-files.js';\nimport '../modules/form-navigation.js';\nimport '../modules/validate-data.js';\nimport '../modules/handle-input.js';\nimport '../modules/nominatim.js';\nimport '../modules/calendly.js';\nimport '../modules/spaces.js';"],"names":[],"sourceRoot":""}